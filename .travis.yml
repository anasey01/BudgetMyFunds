os:
- linux
language: php
php:
- '7.2'
services:
- postgresql
env:
  global:
  - CC_TEST_REPORTER_ID=6d1d2389d19dda26d84170e56c7f339b299782fb6fafc53e6e77540724e31b0e
before_script:
- cp .env.travis .env
- psql -c 'create database budget_my_funds_test;' -U postgres
- composer self-update
- composer install --no-interaction
- php artisan key:generate
- php artisan migrate
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
script:
- vendor/bin/phpunit
deploy:
  provider: heroku
  api_key:
    secure: rU/fpAN2mcNquJEV8mH7mKKN7NE7M5NmjwfNYj77303eOSKlPBWCi9fw464C1ws0uCOb+ytfxmJDOxoKG9L3/cquizsJ816QYuAQOnQAViPA4PQQE9O7zwrfeWGfUM/mQSAOIqCxmSWBZ9ZgaJYkRMnBQouOadh7TY+HDW+OVjG8ruNhsBlS4rRhGQrGfwzY9AqucwZNFJ0GaEiDfEBr7MiIobb/dBO++VJ6lABa9rciZ4DJooQjFDUDH/WeEQI0eN4wDBLPHfb2pOmaxPPac6ZdquXKUJHnJqXBKftFeA1ASP0SU1p6T7+DzKr9dsJocVE1JlQaaXtNRUE70cL1OAJvOxD81LwUp1I0oEVSdipclFtk+mWk1wRsr9C/MFZJH5p8xlbZItwOZt4fTXDK6EXMsdvZMQ8lUxeqa2Ux1UQVJ9c31s54kb22erTBuuSugp/hDOHd3ZftwWFgwUp4AwLbhdBfQC75FA+SV6IohfWL9bmcBvwbzLrti0oY2j07jRgDChQSp/4ih9bh60NOiYQWx64wGtcK2G6YSY9W7VsWsqV/XeDbVz3rKpOTf6yG4zcNnxZYQ3AhW1eKnW4eZkjoGjTxDCUXJNFCaE93bMvXwO6/1EkoJ9akhwSIXaOa4FLXAak4Lf7gzJZKvmjYEywCHeRjnN34gYBkAflarh0=
